# Домашнее задание к занятию 12-08 «Резервное копирование баз данных» - Сергей Ситкарёв

## Задание 1. Резервное копирование

Кейс

Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования.

Необходимо описать, какие варианты резервного копирования подходят в случаях:

### 1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

Для подобного кейса можно использовать полный или дифференциальный бэкап.

### 1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

Судя по всему, предполагается, что в течение часа до поломки уже что-то шло не так. 
Поэтому подойдёт дифференциальный бэкап, но в случае, если он был сделан за час до поломки или ещё раньше.
Так же подойдёт полный бэкап, который был сделан за час до поломки или раньше.

## Задание 2. PostgreSQL

### 2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

- Для создания бэкапа необходимо в терминале выполнить команду:

**pg_dump -h host -p 5432 -d dbname -U user -W > /backup_folder/postgres.backup**

где

-h - хост

-p - порт

-d - имя базы

-U - имя пользователя

-W - запрос ввода пароля

Более детальная информация на оф.странице https://www.postgresql.org/docs/current/app-pgdump.html

- Для восстановления базы из бэкапа используется pg_restore

**pg_restore -h host -p 5432 -d dbname -U user -W < /backup_folder/postgres.backup**

Более детальная информация на оф.странице https://www.postgresql.org/docs/current/app-pgrestore.html

## Задание 3. MySQL

### 3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.

Для создания инкрементных бэкапов MySQL удобнее всего использовать утилиту XtraBackup

Пример инкрементного бэкапа на основе полного:

xtrabackup --backup --target-dir=/root/backupdb/inc1 --incremental-basedir=/root/backupdb/full

Пример инкрементного бэкапа на основе предыдущего инкрементного:

xtrabackup --backup --target-dir=/root/backupdb/inc2 --incremental-basedir=/root/backupdb/inc1

Для восстановления используется слудующая команда:

xtrabackup --decompress --target-dir=/root/backupdb/inc2
